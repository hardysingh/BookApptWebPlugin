
<div>
    <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "line-spin-clockwise-fade" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
    <div class="add-title" align="center" style="margin: -25px -24px 20px;">
        <mat-toolbar role="toolbar" class="task-header primary-bg">   
            <mat-toolbar-row>
                <span class="example-spacer"></span>
                <span><h4>BooK Appointment</h4></span>
                <span class="example-spacer"></span>
                <button align="end" mat-icon-button (click)="onNoClick()">
                    <mat-icon aria-hidden="false" aria-label="close icon">close</mat-icon>
                </button>
               
            </mat-toolbar-row>   
        </mat-toolbar>
    </div>
    
    <!-- <div class="add-title" align="center">
        <h2 class="primary">Contact us</h2>
    </div> -->
    <div fxLayout="column" fxLayoutAlign="center center">
        
          <mat-horizontal-stepper #stepper>
            <mat-step [stepControl]="firstFormGroup" errorMessage="Name is required.">
              <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>Please Select Doctor and Time</ng-template>
                <div fxLayout="row" fxLayoutAlign="space-evenly center" >
                    <mat-card *ngFor="let hcp of hcpList let i = index" [attr.data-index]="i" class="example-card" fxFlex="35" style="padding: 0px 0px 16px 0px;">
                        
                        <img mat-card-image src="{{hcp.serving_url?hcp.serving_url:'https://wayumd.com/reception/assets/images/doctor_square.svg'}}" alt="{{hcp.title}} {{hcp.first_name}}" style="margin: 0 -16px 10px -16px; height: 100px; object-fit: cover;">
                        <mat-card-content style="text-align: center;">
                        <h3 style="margin-bottom: 5px;">{{hcp.title}} {{hcp.first_name}} {{hcp.last_name}} </h3>
                        <h4 style="margin-top: 5px;">{{hcp.specialty}} </h4>
                        </mat-card-content>
                        <mat-card-actions align="center">
                            <button mat-stroked-button disabled style="color: black;">&#8377; {{hcp.consult_fee}}</button>
                            <button mat-stroked-button color="primary" (click)="getAvailableSlots()">SELECT</button>
                        </mat-card-actions>
                    </mat-card>
                     
                </div>
                <div fxLayout="row" fxLayoutAlign="space-evenly center" style="margin-top: 20px;">
                    <mat-chip-list *ngFor="let dt of dateArray let i = index" [attr.data-index]="i"  aria-label="Fish selection">
                        <mat-chip style="height: auto;
                        text-align: center;">
                        {{dt | date:'dd'}} 
                            <br/>
                            {{dt | date:'MMM'}}
                            <br/>
                            {{dt | date:'yyyy'}}
                        </mat-chip>
                        
                        <!-- <mat-chip style="height: auto;
                        text-align: center;" color="primary" selected>12 
                            <br/>
                            Jun
                            <br/>
                            2021
                        </mat-chip> -->
                       
                      </mat-chip-list>
                </div>
                <div fxLayout="column" style="margin-top: 20px;max-height: 240px;overflow-y: auto;">
                    <mat-list>
                        <mat-list-item>Item 1</mat-list-item>
                        <mat-divider></mat-divider>
                        <mat-list-item>Item 2</mat-list-item>
                        <mat-divider></mat-divider>
                        <mat-list-item>Item 3</mat-list-item>
                        <mat-divider></mat-divider>
                        <mat-list-item>Item 4</mat-list-item>
                        <mat-divider></mat-divider>
                        <mat-list-item>Item 5</mat-list-item>
                        <mat-divider></mat-divider>
                        <mat-list-item>Item 6</mat-list-item>
                      </mat-list>
                </div>
                <!-- <mat-form-field>
                  <mat-label>Name</mat-label>
                  <input matInput placeholder="Last name, First name" formControlName="firstCtrl" required>
                </mat-form-field> -->
                <div>
                  <!-- <p>Go to a different step to see the error state</p>
                  <button mat-button matStepperNext>Next</button> -->
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="secondFormGroup" errorMessage="Address is required.">
              <form [formGroup]="secondFormGroup" (change)="formChanged()">
                <ng-template matStepLabel>Fill out your address</ng-template>
                <!-- <mat-form-field>
                  <mat-label>Address</mat-label>
                  <input matInput placeholder="Ex. 1 Main St, New York, NY" formControlName="secondCtrl"
                         required>
                </mat-form-field> -->
                <div *ngIf='contactForm && !succeed && !slotSelected'>
                        <mat-grid-list cols="2" [cols]="breakpoint" rowHeight="2:1" (window:resize)="onResize($event)">
                            <mat-grid-tile colspan="2">
                                <div class="text-inside">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Name</mat-label>
                                        <input matInput placeholder="Name" value={{name}} [(ngModel)]="name"
                                            formControlName="name" required>
                                        <mat-error *ngIf="contactForm.controls.name.hasError('required')">
                                            Please enter name
                                        </mat-error>
                                        <mat-error *ngIf="contactForm.controls.name.hasError('pattern')">
                                            Please enter a valid name
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
                            <mat-grid-tile [class.fullWidth]="breakpoint == 1" class="g1">
                                <div class="text-inside">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Country Code</mat-label>
                                        <mat-select placeholder="Select Country Code" [(ngModel)]="country_code" formControlName="country_code">
                                            <mat-option [value]="code.code"
                                            [selected]="selectedCode === '+91'" *ngFor="let code of countryCodes" >{{ code.code }}</mat-option>
            
                                        </mat-select>
            
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
            
                            <mat-grid-tile [class.fullWidth]="breakpoint == 1" class="g2">
                                <div class="text-inside">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Mobile</mat-label>
                                        <input matInput placeholder="Mobile" value={{mobile}} [(ngModel)]="mobile"
                                            formControlName="mobile" required>
                                        <mat-error *ngIf="contactForm.controls.mobile.hasError('required')">
                                            Please enter a valid mobile number
                                        </mat-error>
                                        <mat-error *ngIf="contactForm.controls.mobile.hasError('pattern')">
                                            Please enter a valid mobile number
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
            
            
                            <mat-grid-tile>
                                <div class="text-inside">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Email</mat-label>
                                        <input matInput placeholder="Email address" [(ngModel)]="email" formControlName="email">
                                        
                                        <mat-error *ngIf="contactForm.controls.email.hasError('pattern')">
                                            Please enter valid email id
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
            
                            <mat-grid-tile>
                                <div class="text-inside">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Select service</mat-label>
                                        <mat-select placeholder="Select service" [(ngModel)]="service" formControlName="service">
                                            
                                            <mat-option *ngFor="let serv of serviceList" [value]="serv">{{ serv.service_name }}</mat-option>
            
                                        </mat-select>
            
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
            
                            <mat-grid-tile colspan="2">
                                <div class="text-inside" style="width: 99%;">
                                    <mat-form-field appearance="outline" style="width: 100%;">
                                        <mat-label>Message</mat-label>
                                        <textarea matInput [(ngModel)]="message" rows="2" value="{{message}}" formControlName="message"
                                            placeholder="message" required style="margin: -10px 0;"></textarea>
                                        <mat-error *ngIf="contactForm.controls.message.hasError('required')">
                                            Please enter your message
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </mat-grid-tile>
                        </mat-grid-list>
                        <br/>
            
                        <!-- <div class="btn-sec" align="end">
                             
                                <button mat-raised-button type="button" class="Discard-btn" (click)="onNoClick()">Cancel</button>&nbsp;
                                <button mat-raised-button type="submit" class="primary-bg Update-btn"
                                (click)="onSaveform()">Submit</button>
                            
                        </div>-->
                </div>
                <!-- <div>
                  <button mat-button matStepperPrevious>Back</button>
                  <button mat-button matStepperNext>Next</button>
                </div> -->
                <div class="btn-sec" align="end">
                             
                    <button mat-raised-button type="button" class="Discard-btn" matStepperPrevious>Cancel</button>&nbsp;
                    <button mat-raised-button type="submit" class="primary-bg Update-btn"
                    (click)="onSaveform()" matStepperNext>Submit</button>
                
                </div>
              </form>
            </mat-step>
            <mat-step>
              <ng-template matStepLabel>Done</ng-template>
              <p>You are now done.</p>
              <div *ngIf='contactForm && succeed'>Thank You for your message, we will get back to you soon!</div>
              <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button (click)="stepper.reset()">Reset</button>
              </div>
            </mat-step>
          </mat-horizontal-stepper>
          
          
    </div>
    
    
</div>